{
	"info": {
		"_postman_id": "a766d394-3667-4d7c-af00-c84852ad1c0b",
		"name": "Цепочка запросов ФГИС \"Зерно\"",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_uid": "25633240-a766d394-3667-4d7c-af00-c84852ad1c0b"
	},
	"item": [
		{
			"name": "Запрос",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8c6594fa-dcf0-4cbf-9198-e1f1579d04fa",
						"exec": [
							"function random_str(len) {\r",
							"    chrs = 'abdehkmnpswxzABDEFGHKMNPQRSTWXZ123456789';\r",
							"    var str = '';\r",
							"    for (var i = 0; i < len; i++) {\r",
							"        var pos = Math.floor(Math.random() * chrs.length);\r",
							"        str += chrs.substring(pos,pos+1);\r",
							"    }\r",
							"    return (str+\"-\");\r",
							"}\r",
							"\r",
							"var MessageID = (random_str(8) + random_str(4) + random_str(4) + random_str(4) + \"liderproduct\");\r",
							"\r",
							"pm.globals.set(\"MessageID\", MessageID);\r",
							"pm.collectionVariables.set(\"MessageID\", MessageID);\r",
							"// logs\r",
							"console.log(MessageID);\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "4fe4dc1c-2f02-476a-8dc5-5a682d4aa219",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n    <soap:Body>\r\n        <SendRequestRequest xmlns=\"urn://x-artefacts-mcx-gov-ru/fgiz-zerno/api/ws/types/1.0.2\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n            <MessageData Id=\"SIGNED_BY_CALLER\">\r\n                <MessageID>{{MessageID}}</MessageID>\r\n                <ReferenceMessageID>{{MessageID}}</ReferenceMessageID>\r\n                <MessagePrimaryContent>\r\n                    <dicts:Request xmlns:dicts=\"urn://x-artefacts-mcx-gov-ru/fgiz-zerno/api/ws/dictionaries/1.0.2\">\r\n                        <dicts:Dictionary>OKPD2</dicts:Dictionary>\r\n                    </dicts:Request>\r\n                </MessagePrimaryContent>\r\n            </MessageData>\r\n            <!-- ЭЦП  -->{{sertificate}}  <!-- ЭЦП  -->\r\n        </SendRequestRequest>\r\n    </soap:Body>\r\n</soap:Envelope>",
					"options": {
						"raw": {
							"language": "xml"
						}
					}
				},
				"url": {
					"raw": "https://demo-zerno.fors.ru/ws/api/fgiz",
					"protocol": "https",
					"host": [
						"demo-zerno",
						"fors",
						"ru"
					],
					"path": [
						"ws",
						"api",
						"fgiz"
					],
					"query": [
						{
							"key": "MessageID",
							"value": null,
							"disabled": true
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Ответ",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "48ae0941-d3e9-4e97-bdb0-bb4ce5b2ef29",
						"exec": [
							"pm.environment.set(\"random_number\", _.random(1000, 9999))"
						],
						"type": "text/javascript"
					}
				}
			],
			"id": "a7ee5824-8157-4920-8848-eaaaab865fdc",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n    <soap:Body>\r\n        <SendResponseRequest xmlns=\"urn://x-artefacts-mcx-gov-ru/fgiz-zerno/api/ws/types/1.0.2\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n            <MessageData Id=\"SIGNED_BY_CALLER\">\r\n                <MessageID>a294c509-10c8-553d-a5a8-79d6a6e3{{random_number}}</MessageID>\r\n                <ReferenceMessageID>{{MessageID}}</ReferenceMessageID>\r\n                <MessagePrimaryContent>\r\n                    <dicts:Request xmlns:dicts=\"urn://x-artefacts-mcx-gov-ru/fgiz-zerno/api/ws/dictionaries/1.0.2\">\r\n                        <dicts:Dictionary>OKPD2</dicts:Dictionary>\r\n                    </dicts:Request>\r\n                </MessagePrimaryContent>\r\n            </MessageData>\r\n            <!-- ЭЦП  -->{{sertificate}}  <!-- ЭЦП  -->\r\n        </SendResponseRequest>\r\n    </soap:Body>\r\n</soap:Envelope>",
					"options": {
						"raw": {
							"language": "xml"
						}
					}
				},
				"url": {
					"raw": "https://demo-zerno.fors.ru/ws/api/fgiz",
					"protocol": "https",
					"host": [
						"demo-zerno",
						"fors",
						"ru"
					],
					"path": [
						"ws",
						"api",
						"fgiz"
					],
					"query": [
						{
							"key": "MessageID_Request",
							"value": "MessageID",
							"disabled": true
						}
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "abeda754-3414-4e55-aa7f-c4d44356d8af",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "9f52d2a8-f140-4fe5-8db9-f8162e036880",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "0dc80a7b-dd0d-41ee-9209-cf862245afd6",
			"key": "sertificate",
			"value": "        <InformationSystemSignature>\n            <Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\">\n                <SignedInfo>\n                    <CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/>\n                    <SignatureMethod Algorithm=\"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-256\"/>\n                    <Reference URI=\"#SIGNED_BY_CALLER\">\n                        <Transforms>\n                            <Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/>\n                            <Transform Algorithm=\"urn://smev-gov-ru/xmldsig/transform\"/>\n                        </Transforms>\n                        <DigestMethod Algorithm=\"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-256\"/>\n                        <DigestValue>2rEI+W7/N2xFbg4PrDe+JlB8WpoM2SIt0UCyS5t1bFU=</DigestValue>\n                    </Reference>\n                </SignedInfo>\n                <SignatureValue>qyzyqpODZJx7Hw+BjqdBy1RPm+7s9J0kxzHsoWaqUSl3oUUTuKNXwJVQ63pLoam2kPTkAaNCB1BrWtdImxQhUA==</SignatureValue>\n                <KeyInfo>\n                    <X509Data>\n                        <X509Certificate>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</X509Certificate>\n                    </X509Data>\n                </KeyInfo>\n            </Signature>\n        </InformationSystemSignature>",
			"type": "string"
		},
		{
			"id": "1f53ceaf-e1e1-4513-88ec-a4741e3c6e7d",
			"key": "MessageID",
			"value": ""
		}
	]
}